<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>PiP+ Icon Converter</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #1a1a1a;
      color: #fff;
      padding: 40px;
      min-height: 100vh;
    }

    h1 {
      margin-bottom: 20px;
    }

    h2 {
      margin-top: 40px;
      margin-bottom: 20px;
      border-bottom: 1px solid #333;
      padding-bottom: 10px;
    }

    .controls {
      margin-bottom: 40px;
      position: sticky;
      top: 20px;
      background: rgba(26, 26, 26, 0.9);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid #333;
      backdrop-filter: blur(10px);
      z-index: 100;
      display: flex;
      gap: 20px;
      align-items: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .preview-container {
      display: flex;
      gap: 40px;
      margin-bottom: 40px;
    }

    .preview-box {
      background: #333;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }

    .preview-box h3 {
      margin: 0 0 15px 0;
      color: #888;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .svg-preview {
      width: 128px;
      height: 128px;
    }

    .sizes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
    }

    .size-card {
      background: #2a2a2a;
      border-radius: 12px;
      padding: 16px;
      text-align: center;
      transition: transform 0.2s;
    }

    .size-card:hover {
      transform: translateY(-2px);
      background: #333;
    }

    .size-card canvas {
      background: #444;
      /* Checkerboard pattern could be better but dark is fine for white/transparent checks */
      background-image: linear-gradient(45deg, #333 25%, transparent 25%), linear-gradient(-45deg, #333 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #333 75%), linear-gradient(-45deg, transparent 75%, #333 75%);
      background-size: 20px 20px;
      background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
      border-radius: 8px;
      margin-bottom: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .size-card .label {
      font-size: 14px;
      color: #888;
      margin-bottom: 8px;
      font-family: monospace;
    }

    .btn {
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: filter 0.2s;
    }

    .btn:hover {
      filter: brightness(1.1);
    }

    .btn-primary {
      background: #0A84FF;
      color: white;
    }

    .btn-success {
      background: #30D158;
      color: white;
      padding: 12px 24px;
      font-size: 16px;
    }

    .btn-secondary {
      background: #8E8E93;
      color: white;
      padding: 12px 24px;
      font-size: 16px;
    }
  </style>
</head>

<body>
  <h1>üé® PiP+ Icon Generator</h1>

  <div class="controls">
    <button class="btn btn-success" onclick="downloadAll('active')">üì¶ ‰∏ãËΩΩÂÖ®ÈÉ® Active (ÂΩ©Ëâ≤)</button>
    <button class="btn btn-secondary" onclick="downloadAll('inactive')">üì¶ ‰∏ãËΩΩÂÖ®ÈÉ® Inactive (ÁÅ∞Ëâ≤)</button>
  </div>

  <div class="preview-container">
    <div class="preview-box">
      <h3>Active (icon.svg)</h3>
      <div id="previewActive"></div>
    </div>
    <div class="preview-box">
      <h3>Inactive (icon_gray.svg)</h3>
      <div id="previewInactive"></div>
    </div>
  </div>

  <h2>Active Icons (icon*.png)</h2>
  <div class="sizes-grid" id="gridActive"></div>

  <h2>Inactive Icons (icon_gray*.png)</h2>
  <div class="sizes-grid" id="gridInactive"></div>

  <script>
    const sizes = [16, 32, 48, 64, 128, 256, 512, 1024, 2048];

    // SVG Contents embedded
    const svgActive = `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg-gradient" x1="0" y1="0" x2="512" y2="512" gradientUnits="userSpaceOnUse">
      <stop offset="0%" stop-color="#0A84FF"/>
      <stop offset="100%" stop-color="#5E5CE6"/>
    </linearGradient>
    <linearGradient id="pop-gradient" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#FF9500"/>
      <stop offset="100%" stop-color="#FF3B30"/>
    </linearGradient>
    <filter id="soft-shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="6"/>
      <feOffset dx="0" dy="4" result="offsetblur"/>
      <feFlood flood-color="rgba(0,0,0,0.3)"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="glow-shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feFlood flood-color="rgba(255, 59, 48, 0.5)"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  <path d="M512 115C512 51.4873 460.513 0 397 0H115C51.4873 0 0 51.4873 0 115V397C0 460.513 51.4873 512 115 512H397C460.513 512 512 460.513 512 397V115Z" fill="url(#bg-gradient)"/>
  <path d="M512 115C512 51.4873 460.513 0 397 0H115C51.4873 0 0 51.4873 0 115V200C150 180 362 180 512 200V115Z" fill="white" fill-opacity="0.15"/>
  <g filter="url(#soft-shadow)">
    <rect x="50" y="100" width="280" height="175" rx="14" fill="white" fill-opacity="0.2" stroke="white" stroke-opacity="0.3" stroke-width="1.5"/>
    <rect x="75" y="135" width="140" height="8" rx="4" fill="white" fill-opacity="0.4"/>
    <rect x="75" y="155" width="100" height="8" rx="4" fill="white" fill-opacity="0.3"/>
  </g>
  <g filter="url(#soft-shadow)">
    <rect x="210" y="210" width="180" height="120" rx="12" fill="white" stroke="white" stroke-width="2"/>
    <circle cx="300" cy="260" r="24" fill="#0A84FF"/>
    <path d="M310 260L292 250V270L310 260Z" fill="white"/>
    <rect x="240" y="295" width="120" height="16" rx="6" fill="#0A84FF" fill-opacity="0.15"/>
    <rect x="250" y="300" width="90" height="6" rx="3" fill="#0A84FF"/>
  </g>
  <g filter="url(#glow-shadow)">
    <circle cx="410" cy="110" r="50" fill="url(#pop-gradient)" stroke="white" stroke-width="4"/>
    <path d="M410 85 V135 M385 110 H435" stroke="white" stroke-width="10" stroke-linecap="round"/>
  </g>
  <path d="M511 115C511 51.7873 459.713 0.5 396.5 0.5H115.5C52.2873 0.5 1 51.7873 1 115V397C1 460.213 52.2873 511.5 115.5 511.5H396.5C459.713 511.5 511 460.213 511 397V115Z" stroke="white" stroke-opacity="0.2" stroke-width="1" fill="none"/>
</svg>`;

    const svgInactive = `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="bg-gradient" x1="0" y1="0" x2="512" y2="512" gradientUnits="userSpaceOnUse">
      <stop offset="0%" stop-color="#0A84FF"/>
      <stop offset="100%" stop-color="#5E5CE6"/>
    </linearGradient>
    <linearGradient id="pop-gradient" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#8E8E93"/>
      <stop offset="100%" stop-color="#636366"/>
    </linearGradient>
    <filter id="soft-shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="6"/>
      <feOffset dx="0" dy="4" result="offsetblur"/>
      <feFlood flood-color="rgba(0,0,0,0.3)"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="glow-shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feFlood flood-color="rgba(142, 142, 147, 0.3)"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  <path d="M512 115C512 51.4873 460.513 0 397 0H115C51.4873 0 0 51.4873 0 115V397C0 460.513 51.4873 512 115 512H397C460.513 512 512 460.513 512 397V115Z" fill="url(#bg-gradient)"/>
  <path d="M512 115C512 51.4873 460.513 0 397 0H115C51.4873 0 0 51.4873 0 115V200C150 180 362 180 512 200V115Z" fill="white" fill-opacity="0.15"/>
  <g filter="url(#soft-shadow)">
    <rect x="50" y="100" width="280" height="175" rx="14" fill="white" fill-opacity="0.2" stroke="white" stroke-opacity="0.3" stroke-width="1.5"/>
    <rect x="75" y="135" width="140" height="8" rx="4" fill="white" fill-opacity="0.4"/>
    <rect x="75" y="155" width="100" height="8" rx="4" fill="white" fill-opacity="0.3"/>
  </g>
  <g filter="url(#soft-shadow)">
    <rect x="210" y="210" width="180" height="120" rx="12" fill="white" stroke="white" stroke-width="2"/>
    <circle cx="300" cy="260" r="24" fill="#0A84FF"/>
    <path d="M310 260L292 250V270L310 260Z" fill="white"/>
    <rect x="240" y="295" width="120" height="16" rx="6" fill="#0A84FF" fill-opacity="0.15"/>
    <rect x="250" y="300" width="90" height="6" rx="3" fill="#0A84FF"/>
  </g>
  <g filter="url(#glow-shadow)">
    <circle cx="410" cy="110" r="50" fill="url(#pop-gradient)" stroke="white" stroke-width="4"/>
    <path d="M410 85 V135 M385 110 H435" stroke="white" stroke-width="10" stroke-linecap="round"/>
  </g>
  <path d="M511 115C511 51.7873 459.713 0.5 396.5 0.5H115.5C52.2873 0.5 1 51.7873 1 115V397C1 460.213 52.2873 511.5 115.5 511.5H396.5C459.713 511.5 511 460.213 511 397V115Z" stroke="white" stroke-opacity="0.2" stroke-width="1" fill="none"/>
</svg>`;

    // È¢ÑËßà
    document.getElementById('previewActive').innerHTML = svgActive;
    document.getElementById('previewInactive').innerHTML = svgInactive;

    // Â≠òÂÇ® canvas ÂºïÁî®
    const canvases = {
      active: {},
      inactive: {}
    };

    function createCards(type, containerId, svgString) {
      const container = document.getElementById(containerId);

      sizes.forEach(size => {
        const card = document.createElement('div');
        card.className = 'size-card';

        const canvas = document.createElement('canvas');
        canvas.width = size;
        canvas.height = size;
        canvas.style.width = Math.min(size, 128) + 'px';
        canvas.style.height = Math.min(size, 128) + 'px';

        canvases[type][size] = canvas;

        const label = document.createElement('div');
        label.className = 'label';
        label.textContent = `${size}px`;

        const btn = document.createElement('button');
        btn.className = 'btn btn-primary';
        const filename = type === 'active' ? `icon${size}.png` : `icon_gray${size}.png`;
        btn.textContent = '‚¨á';
        btn.onclick = () => download(canvas, filename);

        card.appendChild(canvas);
        card.appendChild(label);
        card.appendChild(btn);
        container.appendChild(card);
      });

      // Render
      renderToCanvases(type, svgString);
    }

    function renderToCanvases(type, svgString) {
      const img = new Image();
      const blob = new Blob([svgString], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);

      img.onload = () => {
        sizes.forEach(size => {
          const canvas = canvases[type][size];
          if (canvas) {
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, size, size);
            ctx.drawImage(img, 0, 0, size, size);
          }
        });
        URL.revokeObjectURL(url);
      };
      img.src = url;
    }

    function download(canvas, filename) {
      const link = document.createElement('a');
      link.download = filename;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    window.downloadAll = function (type) {
      let delay = 0;
      sizes.forEach(size => {
        const canvas = canvases[type][size];
        const filename = type === 'active' ? `icon${size}.png` : `icon_gray${size}.png`;
        setTimeout(() => download(canvas, filename), delay);
        delay += 250;
      });
    };

    // Initialize
    createCards('active', 'gridActive', svgActive);
    createCards('inactive', 'gridInactive', svgInactive);

  </script>
</body>

</html>